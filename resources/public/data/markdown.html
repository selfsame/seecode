¶title
# clojure game-dev!

## _Joseph Parker_  

>-----------
># ![me](img/me.png)

>* `selfsamegames.com`
* `twitter.com/jplur_`
* `github.com/selfsame`
* `selfsame.itch.io`
-----------

¶why-clojure

# clojure is creative

★30

## rich core

	(swap! view 
	  (comp flatten 
	    (juxt rest first)))

	(->> entites
	  (remove :dead)
	  (map (juxt :x :y)))

★/★24

## REPL 

	(map 
	  (constantly :tweak) 
	    [every 
	     part 
	     of 
	     your 
	     game])



★/★46

## macros

	(defmacro ∆ [x] 
	  `(* Time/deltaTime ~x))
	
	(when (< (count (every apple)) 5)
	  (place-apple 
	    (v+ (->v3 (rand-nth (every block)))
	        (->v3 0 1 0))))

★/

## data is a joy

★30

* easy to work with
  * `get-in` `update-in`
  * `(merge-with merge a b)`
* easy to write
  * no junk syntax (, ;)
  * paredit | parinfer 



★/★35

	#{[{} '()]}
	:k ::qk #"[^\n]*"
	3/6 0xBADA55 1.2e-5

    ::TODO 
	'(( ) cache markdown map)
	  '((/) finish intro)
	  '((x) game builds)
	  '(( ) publish slide deck)

★/★35

	{[1  0]  :e 
	 [0 -1]  :s 
	 [0  1]  :n  
	 [-1 0]  :w}

	{#{:n :s :w} \┤
	 #{:n :s}    \│
	 #{:n :e :w} \┴
	 #{:n :e}    \└}

★/

¶onlyone
# cljs roguelike

![](data/img/onlyone.png)

¶libgdx
# libGDX

★40

>* Full featured Java engine.  
* desktop / android / ios 
* `https://github.com/oakes/play-clj`

★/★60

># ![](data/img/sausage.jpg)

★/

¶libgdx2
## clj example

	(ns yes.core.desktop-launcher
	  (:import [com.badlogic.gdx.backends.lwjgl LwjglApplication]
	           [org.lwjgl.input Keyboard])
	  (:gen-class))

	(defn -main []
	  (LwjglApplication. (yes.core.Game.) "yes" 1910 1070 true)
	  (Keyboard/enableRepeatEvents true))

★50

	(def main-screen
	  (let [stage (atom nil)]
	    (proxy [Screen] []
	      (show [] (new-game))
	      (render [delta] (repl-render delta))
	      (dispose [] (.dispose batch))
	      (hide [])
	      (pause [])
	      (resize [w h] (handle-resize w h))
	      (resume []))))
★/★2
★/★48

	(defn -create [^Game this]
	  (.setScreen this main-screen)
	  (def batch (SpriteBatch.)))

	(defn repl-render [delta]
	  (.glClearColor (Gdx/gl) r g b a)
	  (.glClear (Gdx/gl) GL20/GL_COLOR_BUFFER_BIT)
	  (.begin batch)
	  'etc)
★/

¶libgdx-games
# 

>demos

* sweeper (keys o/p)
* sheep
* europa

¶arcadia
# github.com/arcadia-unity

## *`@nasser & @timsgardner`*

## clojure CLR inside Unity
> * complete clj environment & repl
> * clj compilation
> * build and ship to desktop platforms

¶arcadia2
## this was huge

# ![](data/img/arcadia/first-repl.jpg)

¶tween
# tween.core

### `github.com/selfsame/tween`

# ![](http://selfsamegames.com/gifs/tweens/tut2.gif) ![](http://selfsamegames.com/gifs/tweens/tut3.gif) 


# ![](./data/img/tween/tween2.gif) 

★35★/
★30

★/


¶tween1

★30

# fast
>* zero garbage
* perf matches C# libs

★/★70

# ![](https://files.gitter.im/selfsame/hard/Gm15/bubb23.gif) ![](http://selfsamegames.com/gifs/tweens/tween01.gif)
★/

## extend as needed

	(require '[tween.core :as tween])

	(tween.core/deftween text-color [^Color value ^Color target]
	  (-add [a b] (Color/op_Addition a b))
	  (-get [this] (.color (.GetComponent this "TextMesh")))
	  (-value [this] (Color/Lerp (.value this) (.target this) (.ratio this))))

	(def greenify (text-color (Color. 0 1 0 1) 2.5 :pow2))

	(mapv greenify (objects-named "frog"))
★/

¶tween2
★15★/
★70
`assoc` tween opts

	(def z (tween/euler (Vector3. 45 0 100) 0.5))
	(def y (assoc z :duration 1.2))
	(= z y) ;false


mutation allows cyclical refs

	(link! a b a) ;a - b - a - CYCLE
	(link! b z y) ;     \  z - y
★/
★15★/

¶ec
# `github.com/selfsame/ec`

## entity/component system for js|cljs

# ![](./data/img/pong.gif) 

¶ec1
## mars base - collaboration w/ `@mills_dalton`

# ![](./data/img/mars.gif) 

¶ec2

# ![](./data/img/ec2.png) ![](./data/img/ec1.png)


¶predicate
# predicate dispatch



¶mud
`github./com/selfsame/mud.tilde.town`

_________

# ![](./data/img/mud.png)

# ![](./data/img/mud2.png)

¶pdfn1
## generic Unity component

# ![](./data/img/pred.gif)

# ![](./data/img/clojurecup02.gif) ![](./data/img/crab/crab5.gif)

¶pdfn3

# same problem solved by `core.match`

## Compiling Pattern Matching to Good Decision Trees

### (Luc Maranget)

¶pdfn2
## `github.com/selfsame/pdfn` (clj/cljs)

## `[selfsame/pdfn "1.0.1-SNAPSHOT"]`

★50

## compiles this

	(pdfn foo 
	  ([^pos?  a        b ^map?   c] :fish)
	  ([^pos?  a ^neg?  b ^empty? c] :snail)
	  ([^neg?  a ^zero? b         c] :mouse)
	  ([       a ^neg?  b ^map?   c] :bird)
	  ([^neg?  a        b ^set?   c] :dog)
	  ([^odd?  a ^pos?  b         c] :lion)
	  ([^even? a ^neg?  b ^map?   c] :horse))
★/★50

## into this

	(fn ([a b c]
	  (if (and (even? a) (neg? b) (map? c))
	    :horse
	    (if (and (odd? a) (pos? b))
	      :lion
	      (if (and (set? c) (neg? a))
	        :dog
	        (if (neg? b)
	          (if (map? c)
	            :bird
	            (if (and (neg? a) (zero? b))
	              :mouse
	              (if (and (pos? a) (empty? c)) 
	                :snail)))
	          (if (and (neg? a) (zero? b))
	            :mouse 
	            (if (and (pos? a) (map? c)) 
	              :fish))))))))
★/

¶whale
# sperm whale simulator

# ![](./data/img/whale.gif) ![](./data/img/squid.gif)


¶whale2
# ![](./data/img/whale/tabfastic.jpg)

# ![](./data/img/whale/whale-shots.jpg) 

¶whale3
# ![](./data/img/whale/predation.jpg)

# ![](./data/img/whale/boid.gif)


¶wacky
# wacky waving inflatable tube guys

# ![](./data/img/wacky/wacky1.gif)

# ![](./data/img/wacky/wacky2.gif)

¶wacky2
# wacky waving inflatable basketball

# ![](./data/img/wacky/wacky3.gif)

¶dual-snake
# dual-snake

## `selfsame.itch.io/dual-snake`

# ![](./data/img/dual-snake/snake3.gif)  ![](./data/img/dual-snake/uptime2.gif)


# ![](./data/img/dual-snake/snake.gif) ![](./data/img/dual-snake/233323445.gif) 

¶dual-snake2

# ![](./data/img/dual-snake/form1.gif)  ![](./data/img/dual-snake/snake-forms.gif)  

# ![](./data/img/dual-snake/form2.gif) ![](./data/img/dual-snake/form3.gif) 

¶squid
# squid experiments

# ![](./data/img/squid/squid.gif)  ![](./data/img/squid/squid2.gif) 

¶squid2
# squid bikes?

# ![](./data/img/squid/bike.gif)  ![](./data/img/squid/squid1.gif)    

¶squid3
## mapping force to the tentacles

★25★/★50

# ![](./data/img/squid/squid3.gif)  

★/

# ![](./data/img/squid/squid4.gif)   

¶night-farm
### night farm

# ![](./data/img/night-farm.gif)

¶modern-dance
#An Evening of Modern Dance

## Ludum Dare 32 - 'unconventional weapon'

# ![](./data/img/modern-dance/lobster1.gif) ![](./data/img/modern-dance/lobster2.gif) 

# ![](./data/img/modern-dance/lobster3.gif)

¶modern-dance2
# press coverage

# ![](./data/img/modern-dance/press.png)

# 1,296 downloads

## `selfsame.itch.io/modern-dance`



¶the-dims
# The Dims

## https://selfsame.itch.io/the-dims

# ![](./data/img/clojurecup01.gif)


¶infinity-coaster
# Infinity Coaster

## `github.com/selfsame/procadia` 

## https://arcadia-clojure.itch.io/infinity-coaster

### #procjam collaboration with `@nasser` `@timsgardner` `@mysterysal`

# ![](./data/img/coaster.png) 

¶infinity-coaster1

# npc tourists

# ![](./data/img/ahhh2.png)

¶infinity-coaster2

# blend shapes 

# ![](./data/img/proc3.gif) ![](./data/img/proc1.gif)

¶infinity-coaster3

# motion sickness

# ![](./data/img/proc54.gif) ![](./data/img/proc53.gif)

¶parade-route
# Parade Route

## `https://selfsame.itch.io/parade-route`

## clojure cup 2014 entry

### first Arcadia game

# ![](./data/img/parade-route.png)

¶monster

# Ludum Dare 33 - 'monster'